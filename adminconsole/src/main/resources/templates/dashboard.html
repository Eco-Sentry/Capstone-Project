<!-- <!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/default.css">
    <title>Responsive Layout</title>
</head>
<body>
    <div class="navbar">
        <div class="logo">Logo</div>
        <nav class="nav-links">
            <a href="#home">Home</a>
            <a href="#about">About</a>
            <a href="#profile">Profile</a>
            <a href="#dashboard">Dashboard</a>
        </nav>
    </div>
    <button class="sidebar-toggle" onclick="toggleSidebar()">⇒</button>
    <div class="sidebar" id="sidebar">
        <div>
            <input type="datetime-local" id="startTimeInput" value="2024-05-06T04:01">
            <input type="datetime-local" id="endTimeInput" value="2024-05-06T06:40">
            <input type="number" id="rangeInput" value="1000000">
            <button onclick="refreshIframe()">Refresh</button>
            <iframe id="dataFrame" style="width: 100%; height: 600px; border: none;"></iframe>
        </div>
    </div>
    <div class="content">
        <div class="search-area">
            <input type="text" class="search-input" placeholder="Search...">
            <button class="search-button">Search</button>
        </div>
        <div class="main-div">















            <iframe id="dataFrame" style="width: 100%; height: 600px; border: none;"></iframe>
            <script>
                const iframe = document.getElementById('dataFrame');
            
                function refreshIframe() {
                    const startTime = document.getElementById('startTimeInput').value;
                    const endTime = document.getElementById('endTimeInput').value;
                    const range = document.getElementById('rangeInput').value;
            
                    fetch('http://202.65.64.38:5000/generate-multi-sensor-graph', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            startTime,
                            endTime,
                            longitude: "150.89494",
                            latitude: "-34.39212",
                            range,
                            sensorTypes: ["ba280d1f-e1ee-4cff-b695-101e3a9e211b", "b53a5c22-63c0-4201-9df3-bc16d0d263b5"]
                        })
                    }).then(response => response.text())
                    .then(html => {
                        const doc = iframe.contentWindow.document;
                        doc.open();
                        doc.write(html);
                        doc.close();
                    }).catch(error => console.error('Error loading the iframe content:', error));
                }
            
                refreshIframe(); // Initial load
            
            </script>
        </div>











    </div>
    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            if (sidebar.style.transform === 'translateX(0px)') {
                sidebar.style.transform = 'translateX(-100%)'; // Hide the sidebar
            } else {
                sidebar.style.transform = 'translateX(0px)'; // Show the sidebar
            }
        }
        // Add event listener to handle window resizing
        window.addEventListener('resize', function() {
            const sidebar = document.getElementById('sidebar');
            if (window.innerWidth >= 768) {
                // Ensure sidebar is open on larger screens
                sidebar.style.transform = 'translateX(0px)';
            } else if (window.innerWidth < 768 && sidebar.style.transform === 'translateX(0px)') {
                // Keep current state if the sidebar is already open
                sidebar.style.transform = 'translateX(-100%)';
                return;
            } else {
                // Ensure sidebar is closed on smaller screens when not specifically toggled
                sidebar.style.transform = 'translateX(-100%)';
            }
        });
        document.addEventListener('DOMContentLoaded', function () {
            const navbar = document.querySelector('.navbar');

            navbar.addEventListener('click', function(event) {
                if (window.innerWidth < 768) {
                    navbar.classList.toggle('active');
                    if (navbar.classList.contains('active')) {
                        navbar.style.height = '100vh'; // Full height
                    } else {
                        navbar.style.height = '60px'; // Default height
                    }
                }
            });

            window.addEventListener('resize', function() {
                if (window.innerWidth >= 768) {
                    navbar.classList.remove('active');
                    navbar.style.height = '60px'; // Ensure default height
                }
            });

            const sidebar = document.getElementById('sidebar');
            if (window.innerWidth >= 768) {
                // Ensure sidebar is open on larger screens
                sidebar.style.transform = 'translateX(0px)';
            } else if (window.innerWidth < 768 && sidebar.style.transform === 'translateX(0px)') {
                // Keep current state if the sidebar is already open
                return;
            } else {
                // Ensure sidebar is closed on smaller screens when not specifically toggled
                sidebar.style.transform = 'translateX(-100%)';
            }
        });



    </script>
</body>
</html> -->

























<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/default.css">
    <title>Responsive Layout</title>
</head>
<body>
    <div class="navbar">
        <div class="logo">Logo</div>
        <nav class="nav-links">
            <a th:href="@{home}">Home</a>
            <a th:href="@{about}">About</a>
            <a th:href="@{guide}">Guide</a>
            <a th:href="@{profile}">Profile</a>
            <a th:href="@{dashboard}">Dashboard</a>
            <a th:href="@{mySentries}">My Sentries</a>
        </nav>
    </div>
    <button class="sidebar-toggle" onclick="toggleSidebar()">⇒</button>
    <div class="sidebar" id="sidebar">
        <div>
            <input type="datetime-local" id="startTimeInput" value="2024-05-06T04:01">
            <input type="datetime-local" id="endTimeInput" value="2024-05-06T06:40">
            <input type="number" id="rangeInput" value="1000000">
            <button onclick="refreshIframe()">Refresh</button>
        </div>
    </div>
    <div class="content">
        <div class="search-area">
            <input type="text" class="search-input" placeholder="Search...">
            <button class="search-button">Search</button>
        </div>
        <div class="main-div">
            <iframe id="dataFrame" style="width: 100%; height: 600px; border: none;"></iframe>
        </div>
    </div>
    <script>
        function setupDateTimeInputs() {
            const now = new Date();
            const oneDayAgo = new Date(now.getTime() - (24 * 60 * 60 * 1000));
        
            // Formatting to datetime-local input format YYYY-MM-DDTHH:mm
            const formatDateTimeLocal = (date) => {
                const off = date.getTimezoneOffset();
                const adjustedDate = new Date(date.getTime() - off * 60 * 1000);
                return adjustedDate.toISOString().slice(0, 16);
            };
        
            document.getElementById('endTimeInput').value = formatDateTimeLocal(now);
            document.getElementById('startTimeInput').value = formatDateTimeLocal(oneDayAgo);
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            setupDateTimeInputs(); // Set the initial date and time for inputs
            refreshIframe(); // Load the iframe content based on the default times
        });
    </script>
        
    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            if (sidebar.style.transform === 'translateX(0px)') {
                sidebar.style.transform = 'translateX(-100%)'; // Hide the sidebar
            } else {
                sidebar.style.transform = 'translateX(0px)'; // Show the sidebar
            }
        }
        // Add event listener to handle window resizing
        window.addEventListener('resize', function() {
            const sidebar = document.getElementById('sidebar');
            if (window.innerWidth >= 768) {
                // Ensure sidebar is open on larger screens
                sidebar.style.transform = 'translateX(0px)';
            } else if (window.innerWidth < 768 && sidebar.style.transform === 'translateX(0px)') {
                // Keep current state if the sidebar is already open
                sidebar.style.transform = 'translateX(-100%)';
                return;
            } else {
                // Ensure sidebar is closed on smaller screens when not specifically toggled
                sidebar.style.transform = 'translateX(-100%)';
            }
        });

        function refreshIframe() {
            const iframe = document.getElementById('dataFrame');
            if (iframe.contentWindow) {
                loadIframeContent();
            } else {
                iframe.onload = loadIframeContent; // Wait for the iframe to load before loading content
            }
        }

        function formatDateTimeForAPI(datetimeValue) {
            // Adding seconds and 'Z' to make it ISO 8601 complete UTC time
            return new Date(datetimeValue).toISOString();
        }

        function loadIframeContent() {
            const iframe = document.getElementById('dataFrame');
            const startTime = formatDateTimeForAPI(document.getElementById('startTimeInput').value);
            const endTime = formatDateTimeForAPI(document.getElementById('endTimeInput').value);
            const range = document.getElementById('rangeInput').value;

            fetch('http://202.65.64.38:5000/generate-multi-sensor-graph', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    startTime,
                    endTime,
                    longitude: "150.89494",
                    latitude: "-34.39212",
                    range,
                    sensorTypes: ["b53a5c22-63c0-4201-9df3-bc16d0d263b5", "ba280d1f-e1ee-4cff-b695-101e3a9e211b"]
                })
            }).then(response => response.text())
            .then(html => {
                const doc = iframe.contentWindow.document;
                doc.open();
                doc.write(html);
                doc.close();
            }).catch(error => console.error('Error loading the iframe content:', error));
        }

        document.addEventListener('DOMContentLoaded', function () {
            const navbar = document.querySelector('.navbar');

            navbar.addEventListener('click', function(event) {
                if (window.innerWidth < 768) {
                    navbar.classList.toggle('active');
                    if (navbar.classList.contains('active')) {
                        navbar.style.height = '100vh'; // Full height
                    } else {
                        navbar.style.height = '60px'; // Default height
                    }
                }
            });

            window.addEventListener('resize', function() {
                if (window.innerWidth >= 768) {
                    navbar.classList.remove('active');
                    navbar.style.height = '60px'; // Ensure default height
                }
            });

            const sidebar = document.getElementById('sidebar');
            if (window.innerWidth >= 768) {
                // Ensure sidebar is open on larger screens
                sidebar.style.transform = 'translateX(0px)';
            } else if (window.innerWidth < 768 && sidebar.style.transform === 'translateX(0px)') {
                // Keep current state if the sidebar is already open
                return;
            } else {
                // Ensure sidebar is closed on smaller screens when not specifically toggled
                sidebar.style.transform = 'translateX(-100%)';
            }
        });

        refreshIframe(); // Initial load when everything is set up
    </script>
</body>
</html>
